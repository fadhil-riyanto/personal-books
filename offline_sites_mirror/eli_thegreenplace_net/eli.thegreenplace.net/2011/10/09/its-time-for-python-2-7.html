<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">

<!-- Mirrored from eli.thegreenplace.net/2011/10/09/its-time-for-python-2-7 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 17 Feb 2025 00:04:03 GMT -->
<head>
    <title>It's time for Python 2.7 - Eli Bendersky's website</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="../../../favicon.ico" rel="icon">

    <!-- Bootstrap -->
        <link rel="stylesheet" href="../../../theme/css/bootstrap.min.css" type="text/css"/>
    <link href="../../../theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="../../../theme/css/pygments/vs.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../theme/css/style.css" type="text/css"/>

        <link href="../../../feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Eli Bendersky's website ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="../../../index.html" class="navbar-brand">
                <img src="../../../images/logosmall.png" width="32" height="32"/>
Eli Bendersky's website            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="../../../pages/about.html">
                        <i class="fa fa-question"></i>
                        <span class="icon-label">About</span>
                    </a>
                </li>
                <li>
                    <a href="../../../pages/projects.html">
                        <i class="fa fa-github"></i>
                        <span class="icon-label">Projects</span>
                    </a>
                </li>
                <li>
                    <a href="../../../archives/all.html">
                        <i class="fa fa-th-list"></i>
                        <span class="icon-label">Archives</span>
                    </a>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="its-time-for-python-2-7.html"
                       rel="bookmark"
                       title="Permalink to It's time for Python 2.7">
                        It's time for Python 2.7
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="published">
        <i class="fa fa-calendar"></i>
        <time> October 09, 2011 at 23:24</time>
    </span>
<span class="label label-default">Tags</span>
    <a href="../../../tag/python.html">Python</a>
</footer><!-- /.post-info -->                    </div>
                </div>
                
        <p>Two years ago I decided to move my main Python development from version 2.5 to 2.6, and <a class="reference external" href="../../../2009/08/07/its-time-for-python-26/index.html">wrote about</a> the new features of 2.6 which I found most useful.</p>
<p>Now I think it's a good time for me to move to 2.7, so this post has a similar goal.</p>
<p>Python 2.7 is not an ordinary version. It's the last major release of the 2.x series - no more language features and new libraries will be added to Python 2.x - all new development is focused on 3.x. However, since the Python core development team recognizes that Python 2.x is going to be used for a long time yet (even if just for legacy systems), the 2.7 release will be in maintenance mode for longer than usual, and there's a real effort to fix any bugs found in it.</p>
<p>Python 2.6 inherited some features from 3.x that allowed easier transition in the future (for example, it's not very hard to write code that runs on both Python 2.6 and 3.x). Version 2.7 takes this another step forward, adding even more features from 3.x, which both make the future transition even easier, and improve the language overall. Here are some examples:</p>
<div class="section" id="set-literals-and-comprehensions">
<h3>set literals and comprehensions</h3>
<p>Thanks to the new set literal syntax, the following two statements are equivalent:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">&gt;&gt;&gt; myset = <span style="color: #00007f">set</span>([<span style="color: #007f7f">2</span>, <span style="color: #007f7f">3</span>])
&gt;&gt;&gt; myset = {<span style="color: #007f7f">2</span>, <span style="color: #007f7f">3</span>}
</pre></div>
<p>Now sets are as &quot;built-in&quot; in Python as lists and dictionaries are, and this is a good thing, because sets are a very convenient data structure for many different purposes. It's not that sets weren't very usable in previous versions - but their own syntax gives them a &quot;first-class citizen&quot; status.</p>
<p>Additionally, set and dict comprehensions are now possible:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">&gt;&gt;&gt; {i*<span style="color: #007f7f">2</span> <span style="color: #00007f; font-weight: bold">for</span> i <span style="color: #0000aa">in</span> <span style="color: #00007f">range</span>(<span style="color: #007f7f">5</span>)}
<span style="color: #00007f">set</span>([<span style="color: #007f7f">0</span>, <span style="color: #007f7f">8</span>, <span style="color: #007f7f">2</span>, <span style="color: #007f7f">4</span>, <span style="color: #007f7f">6</span>])
&gt;&gt;&gt; {i: i*<span style="color: #007f7f">2</span> <span style="color: #00007f; font-weight: bold">for</span> i <span style="color: #0000aa">in</span> <span style="color: #00007f">range</span>(<span style="color: #007f7f">5</span>)}
{<span style="color: #007f7f">0</span>: <span style="color: #007f7f">0</span>, <span style="color: #007f7f">1</span>: <span style="color: #007f7f">2</span>, <span style="color: #007f7f">2</span>: <span style="color: #007f7f">4</span>, <span style="color: #007f7f">3</span>: <span style="color: #007f7f">6</span>, <span style="color: #007f7f">4</span>: <span style="color: #007f7f">8</span>}
</pre></div>
<p><em>List</em> comprehensions make a lot of problems easy to express succinctly. <em>Dict</em> and <em>set</em> comprehensions further improve Python in this respect.</p>
</div>
<div class="section" id="unittest-enhancements">
<h3>unittest enhancements</h3>
<p>A very welcome new feature is some important additions to the <tt class="docutils literal">unittest</tt> module. Unlike most parts of the standard library, <tt class="docutils literal">unittest</tt> is something I use in virtually <em>every</em> project, so any improvement in it matters a lot. Some highlights:</p>
<ul class="simple">
<li><tt class="docutils literal">unittest</tt> now has simple test discovery capabilities. This means you can run it (by invoking the module with <tt class="docutils literal">python <span class="pre">-m</span> unittest</tt>) on a directory and it will automatically discover and execute all test files in it. This is a feature other unit-testing libraries (like <tt class="docutils literal">nose</tt>) boast, and it's great to have it built-in.</li>
<li><tt class="docutils literal">assertRaises</tt> can now work as a context manager, which makes it much more pleasant to use.</li>
<li>Resource allocation and cleanup for tests should now be much easier to implement, thanks to new class and module-level <tt class="docutils literal">setUp</tt> and <tt class="docutils literal">tearDown</tt> methods, and a method for adding additional custom cleanup functions.</li>
<li>A lot of useful new assertion methods have been added. For example (all of these also have negative variants): <tt class="docutils literal">assertIs</tt>, <tt class="docutils literal">assertIn</tt>, <tt class="docutils literal">assertIsInstance</tt>, <tt class="docutils literal">assertRaisesRegexp</tt>.</li>
<li><tt class="docutils literal">assertEqual</tt> became much smarter about reporting failures when comparing lists, dicts, tuples and sets. For example, if two lists aren't equal, only the mismatch is reported instead of dumping them wholly as the old <tt class="docutils literal">assertEqual</tt> would do.</li>
</ul>
</div>
<div class="section" id="no-more-cstringio">
<h3>No more cStringIO</h3>
<p><tt class="docutils literal">StringIO</tt> is a great tool, but it's written in pure Python and thus is slow, which can limit its usefulness when performance is critical. So for a long time  we've been used to importing it from the alternative C-based package <tt class="docutils literal">cStringIO</tt>.</p>
<p>In Python 2.6, the <tt class="docutils literal">io</tt> package from 3.x has been backported, but with an old and inefficient pure-Python implementation of <tt class="docutils literal">StringIO</tt>. Finally, Python 2.7 brings the C-optimized <tt class="docutils literal">io</tt> package from 3.1, and <tt class="docutils literal">cStringIO</tt> is no longer needed (it still exists, of course). Just:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">&gt;&gt;&gt; <span style="color: #00007f; font-weight: bold">from</span> <span style="color: #00007f">io</span> <span style="color: #00007f; font-weight: bold">import</span> StringIO
</pre></div>
<p>And you're good to go. This will work in Python 3.x too, of course, so one less compatibility issue to worry about.</p>
<p>Note that in Python 3.x, I/O handling has been considerably redesigned, in part to accommodate for the stricter distinction between textual and binary data that 3.x makes. The <tt class="docutils literal">io</tt> module backported to 2.x allows to use this code, although it's not the default for file and stream handling (i.e. the built-in <tt class="docutils literal">open</tt> function won't use it). When applicable (such as with <tt class="docutils literal">StringIO</tt>), it's recommended to use the <tt class="docutils literal">io</tt> module in 2.7, for easier future transition to 3.x.</p>
</div>
<div class="section" id="ordereddict">
<h3>OrderedDict</h3>
<p>Python prides itself at being a &quot;batteries included&quot; language, but naturally you can't have all possible batteries included from the start, so the standard library slowly grows over time, adding more and more useful tools.</p>
<p>One tool that has been on the &quot;wanted&quot; list for a long time is an ordered dictionary - a dictionary that remembers the order in which the items were inserted into it. So this data structure appeared in many different recipes and forms, &quot;unoficially&quot;. Python 2.7 adds the <tt class="docutils literal">collections.OrderedDict</tt> class for this purpose, so that's another battery now included in the standard library.</p>
</div>
<div class="section" id="argparse">
<h3>argparse</h3>
<p>Not satisfied with the two existing tools for parsing command-line arguments (<tt class="docutils literal">getopt</tt> and <tt class="docutils literal">optparse</tt>), Python 3.2 added another one - <tt class="docutils literal">argparse</tt>, an enhanced version of <tt class="docutils literal">optparse</tt> (which is also why <tt class="docutils literal">optparse</tt> became deprecated). Python 2.7 takes this module from 3.2. So if you feel <tt class="docutils literal">optparse</tt> is too limiting for your needs, you will be happy with this change.</p>
<p>There are many more changes in 2.7, the above is just a sample of what I found to be interesting. For the full list see the <a class="reference external" href="http://docs.python.org/dev/whatsnew/2.7.html">What's New in Python 2.7</a> documentation page. Overall, it's a pretty good update, making Python coding even more pleasant.</p>
<p>I want to stress again the importance of the 2.7 release, being the last in the 2.x series. That's it, the last incremental upgrade. Consider that while 2.7 borrows features from 3.2 and 3.1, when 3.3 is released there will be no corresponding 2.x release to backport its features to. IMHO this is when Python 3.x will finally start growing <em>really</em> apart from 2.x (in terms of features), and this will hopefully encourage more people to do the switch. For now, my recommendation is to make sure your code runs on both 3.x and 2.x. With 2.7, it isn't very hard to achieve.</p>
</div>

    
            </div>
            <!-- /.entry-content -->
<hr/>
<div class="dotted-links">
<p class="align-center">
For comments, please send me
<a href="mailto:eliben@gmail.com"><i class="fa fa-envelope-o"></i> an email</a>.
</p>
</div>        </article>
    </section>

    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">
            &copy; 2003-2025 Eli Bendersky
         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="http://code.jquery.com/jquery-2.2.4.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="../../../theme/js/bootstrap.min.js"></script>

<!--
  Using goatcounter to count visitors. The count.js script is vendored in.
-->
<script data-goatcounter="https://stats.thegreenplace.net/count"
        async src="../../../theme/js/count.js"></script>
</body>

<!-- Mirrored from eli.thegreenplace.net/2011/10/09/its-time-for-python-2-7 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 17 Feb 2025 00:04:03 GMT -->
</html>